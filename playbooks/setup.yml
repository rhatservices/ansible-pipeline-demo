- name: Setup local cluster
  hosts: localhost
  roles:
    - gitea
    - pipeline
    - controller
  post_tasks:
    - name: Print gitea user credentials if newly registered
      ansible.builtin.debug:
        msg:
          - "Gitea user: {{ gitea_username }}"
          - "Gitea user: {{ gitea_password }}"
          - "Gitea URL : {{ gitea_url }}"
      when:
        - not gitea_skip_gitea | bool
        - not gitea_user_registered | bool

    - name: Print Ansible Controller route
      ansible.builtin.debug:
        msg:
        - "Go to {{ controller_url }} and add a subscription!"
        - "After adding the subscription execute 'make controller-content"
      when:
        - controller_url is defined
        - not controller_subscription_installed | bool
